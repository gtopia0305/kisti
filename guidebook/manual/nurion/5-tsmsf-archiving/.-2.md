# 다. 아카이빙 방법

**3.1 로그인 노드 및 Datamover 노드 접속**

&#x20;

사용자 데이터 아카이빙을 위해서는 누리온 시스템의 로그인 노드나 Datamover 노드를 활용하시기 바랍니다. 주의하실 점은 최초 로그인시 디렉토리 위치는 ‘/home01/$USER’로 이는 TSMSF 내의 홈 디렉터리가 아니라 누리온 시스템의 일반적인 홈 디렉터리입니다. 따라서 cd 명령어(cd /scratch/arcv/$USER)로 경로를 변경하여 TSMSF를 위한 사용자 디렉터리로 이동하시기 바랍니다.

&#x20;

&#x20;

(방법1) 로그인 노드(nurion.ksc.re.kr)나 Datamover 노드(nurion-dm.ksc.re.kr)에 접속(ssh)하여 cp 사용

| <p>[user01@dm2:/home01/user01 ]$ <strong>ssh $USER@nurion-dm.ksc.re.kr (또는 ssh $USER@nurion.ksc.re.kr)</strong></p><p>  Password(OTP):</p><p>  Password:</p><p> </p><p>[user01@dm02:/home01/user01 ]$ <strong>cp –r [mydir | myfile] /scratch/arcv/$USER/</strong></p> |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

&#x20;

&#x20;

(방법2) 원격에서 scp 사용

| <p>[user01@login01:/home01/user01 ]$ <strong>scp –r [mydir | myfile] $USER@nurion-dm.ksc.re.kr:/scratch/arcv/$USER/</strong></p><p>  Password(OTP):</p><p>  Password:</p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

&#x20;

&#x20;

(방법3) FTP / SFTP 클라이언트 프로그램을 이용하여 Datamover 노드(nurion-dm.ksc.re.kr) 접속하여 파일 업로드

&#x20;****&#x20;

① 파일질라(FileZilla) 클라이언트를 이용한 예제(FTP)

\- Datamover 노드에 접속하기 위한 정보를 입력하고 빠른 ‘연결 버튼’을 클릭

| 호스트                 | 사용자명           | 비밀번호     | 포트 |
| ------------------- | -------------- | -------- | -- |
| nurion-dm.ksc.re.kr | USER ID(사용자계정) | 사용자 비밀번호 | 21 |

&#x20;\- 리모트 사이트의 경로가 사용자 홈 디렉토리(/home01/$USER) 이므로 지정된 디렉토리(/scratch/arcv/$USER)로 이동

※ 리모트 사이트 경로에 직접 절대경로를 입력하면 쉽게 이동가능

&#x20;

\- 왼쪽 로컬 사이트에서 파일이나 디렉토리를 선택하여 파일 업로드

※ 보다 상세한 파일질라 매뉴얼은 사이트(https://filezilla-project.org/) 참조

&#x20;

② SSH Secure Shell Client를 이용한 예제(SFTP)

\- Datamover 노드에 접속하기 위해서‘Quick Connect’ 버튼 클릭

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서.jpg>)

&#x20;\- Datamover 노드에 접속하기 위한 정보를 입력하고 ‘연결(Connect)’ 버튼 클릭

| 호스트                 | 사용자명           | 포트 | 인증방법                 |
| ------------------- | -------------- | -- | -------------------- |
| nurion-dm.ksc.re.kr | USER ID(사용자계정) | 22 | Keyboard Interactive |

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서(1).dib>)

* 일회용패스워드(OTP)와 비밀번호(Password)를 순차적으로 입력하고 ‘OK’ 버튼 클릭

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서(2).dib>)

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서(3).dib>)

\- 오른쪽 사이트의 경로가 사용자 홈 디렉토리(/home01/$USER) 이므로 지정된 디렉토리(/scratch/arcv/$USER)로 이동

※ 해당 경로에 직접 절대경로를 입력하면 쉽게 이동가능

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서(4).dib>)

* 왼쪽 로컬 사이트에서 파일이나 디렉토리를 선택하여 파일 업로드

![](<../../../../.gitbook/assets/Datamover 노드에 접속하기 위해서(5).dib>)

&#x20;

**3.2 데이터 아카이빙**

&#x20;

지정된 디렉토리(/scratch/arcv/$USER) 내 파일 중 크기가 10Mbytes 이상이고 3일 동안(추후 변경예정) 접근하지 않은 파일은 자동으로 아카이빙이 진행되며, 아카이빙이 진행된 파일은 다음과 같이 파일 사이즈 0인 임시파일(chunk file)만 해당 디렉토리에 존재하고 실제 데이터는 테이프 라이브러리에 존재하게 됩니다. 파일의 개수가 많아지면 테이프 라이브러리로 아카이빙을 진행할 때나 파일 사용을 위해 디스크로 복구하는데 시간이 더 걸리게 되므로 가능하면 압축(tar 등)하여 파일 개수를 줄일 것을 권장합니다.&#x20;

| <p>[user01@dm2 ~] <strong>ls –lh /scratch/arcv/$USER/*</strong></p><p>... 생략 ...</p><p>-rw-r--r-- 1 root root 0 Feb 5 18:51 2019-2-19-18-51.[File Name].archived</p><p>... 생략 ...</p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

&#x20;

&#x20;

&#x20;o 예제

| <p># ls -l <strong>/scratch/arcv/testdir/</strong></p><p>total 2744320</p><p>-rw-r--r-- 1 root root         0 Feb 25 20:48 2019-2-25-20-48.test.220M.archived</p><p>-rw-r--r-- 1 root root         0 Feb 25 20:48 2019-2-25-20-48.test.230M.archived</p><p>-rw-r--r-- 1 root root 104857600 Sep 27 14:54 test.100M</p><p>-rw-r--r-- 1 root root  10485760 Sep 27 14:54 test.10M</p><p>-rw-r--r-- 1 root root 115343360 Sep 27 14:54 test.110M</p><p>... 생략 ...</p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

&#x20;

&#x20;

&#x20;**3.3 아카이빙 된 파일의 세부정보 확인**

&#x20;

아카이빙 된 자료는 arc\_ls 명령어를 통해 다음과 같이 파일의 세부정보를 확인 할 수 있습니다.

| <p># arc_ls <strong>/scratch/arcv/testdir/</strong></p><p>DIR: /scratch/arcv/testdir</p><p>ARC: /scratch/arcv/testdir/2019-2-25-20-48.test.460M.archived</p><p>      - File to restore    : /scratch/arcv/testdir/test.460M</p><p>      - File owner         : 0</p><p>      - File group         : 0</p><p>      - File size          : 482344960</p><p>      - Archived Name      : 3_7_4_6_scratcharcvtestdirtest.460M</p><p>      - Archived time      : 1551095210</p><p>NRM: /scratch/arcv/testdir/test.10M</p><p>... 생략 ...</p> |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

&#x20;

arc\_ls 명령어는 디렉토리나 파일의 상대경로 또는 절대경로를 인자로 줄 수 있고 필요시 –r 옵션을 통해 지정된 디렉토리 내 하위 경로를 탐색할 수 있습니다. 출력 결과에서 DIR은 디렉토리 의미하며 NRM은 일반 파일, ARC는 아카이빙 된 파일을 의미합니다.
