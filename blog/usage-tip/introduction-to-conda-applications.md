# Conda 의 활용 소개

아나콘다(Anaconda)는 PYTHON 과 R 프로그래밍 언어로 된 과학 컴퓨팅(데이터 과학, 기계 학습 응용 프로그램, 대규모 데이터 처리, 예측 분석 등)분야의 패키지들의 모음을 제공하는 배포판이다.

Anaconda 배포판은 1,200 만 명이 넘는 사용자가 사용하며 Windows, Linux 및 MacOS에 적합한 1400 가지 이상의 인기있는 데이터 과학 패키지를 포함한다.

Anaconda를 설치하기 위해서는 [https://www.anaconda.com](https://www.anaconda.com/) 웹사이트에서 자신의 OS에 맞는 배포판을 다운받아 설치하면 된다.

(예) Windows, MacOS, Linux

현재 Anaconda 는 Python 3.7 기반의 버전과 Python 2.7 기반의 버전을 제공한다.

\


conda 는 아나콘다에서 패키지 버전 관리를 위해 제공되는 어플리케이션이다.

Python 사용자들이 패키지 설치 시 가장 어려움을 겪는 의존성 문제를 conda 를 활용함으로써 쉽게 해결할 수 있다.

\


본 문서는 KISTI 시스템에서 Python 사용자를 위하여 conda 패키지 활용하는 방법을 소개 한다.

소개 페이지의 "/home01/optpar02" 는 테스트 계정 optpar02 의 홈디렉토리로 자신에 맞는 경로로 적절히 변경해서 사용해야 한다.

&#x20;

**1. Conda 의 사용**

&#x20;\- Miniconda는 https://docs.conda.io/en/latest/miniconda.html 사이트 에서 각 OS 에 맞는 버전을 다운 받을 수 있고,

&#x20;  Anaconda 는 [https://www.anaconda.com/distribution/#download-section](https://www.anaconda.com/distribution/#download-section) 사이트 에서 각 OS 에 맞는 버전을 다운 받을 수 있다.

\


| **명령어 모음** | **내용**                                                                                                                                                                           |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  clean     |  Remove unused packages and caches.                                                                                                                                              |
| config     | <p> Modify configuration values in .condarc.  This is modeled after the git config command. </p><p> Writes to the user .condarc file (/home01/optpar02/.condarc) by default.</p> |
|  create    |  Create a new conda environment from a list of specified packages.                                                                                                               |
|  help      |  Displays a list of available conda commands and their help strings.                                                                                                             |
|  info      |  Display information about current conda install.                                                                                                                                |
|  init      |  Initialize conda for shell interaction. \[Experimental]                                                                                                                         |
|  install   |  Installs a list of packages into a specified conda environment.                                                                                                                 |
|  list      |  List linked packages in a conda environment.                                                                                                                                    |
|  package   |  Low-level conda package utility. (EXPERIMENTAL)                                                                                                                                 |
|  remove    |  Remove a list of packages from a specified conda environment.                                                                                                                   |
|  uninstall |  Alias for conda remove.                                                                                                                                                         |
|  run       |  Run an executable in a conda environment. \[Experimental]                                                                                                                       |
|  search    | <p> Search for packages and display associated information. <br> The input is a MatchSpec, a query language for conda packages.</p><p> See examples below.</p>                   |
|  update    |  Updates conda packages to the latest compatible version.                                                                                                                        |
|  upgrade   |  Alias for conda update                                                                                                                                                          |

\


**2. Conda Environment 생성**

\- conda environment 는 Python 의 독립적인 가상 실행환경을 만들어 패키지들의 버전 관리에 용이 하다.

\- "conda create -n \[ENVIRONMENT]" 을 이용하여 conda environment를 생성 할 수 있다.

\- 기본 값으로 conda path 의 envs 아래 경로에 지정한 environment 이름으로 생성된다.

\- "--use-local" 옵션을 사용하면 사용자 홈 디렉토리(**${HOME}/.conda/envs/\[environment\_name]**)에 생성 된다.

\


&#x20;\- 예제 -

| <p>[optpar02@login02 ~]$ <strong>module load python/3.7.1</strong></p><p>[optpar02@login02 ~]$ <strong>conda create -n scikit-learn_0.21 --use-local</strong></p><p>Collecting package metadata: done</p><p>Solving environment: done</p><p><br></p><p>## Package Plan ##</p><p><br></p><p>  environment location: /home01/optpar02/.conda/envs/scikit-learn_0.21</p><p><br></p><p><br></p><p><br></p><p>Proceed ([y]/n)? y</p><p><br></p><p>Preparing transaction: done</p><p>Verifying transaction: done</p><p>Executing transaction: done</p><p>#</p><p># To activate this environment, use:</p><p># > conda activate scikit-learn_0.21</p><p>#</p><p># To deactivate an active environment, use:</p><p># > conda deactivate</p><p>#</p><p><br></p><p>[optpar02@login02 ~]$ <strong>source activate scikit-learn_0.21</strong></p><p>(scikit-learn_0.21) [optpar02@login02 ~]$ <strong></strong> </p> |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\


**3. Conda Environment에 패키지 설치 및 확인**

\- conda install \[패키지명] 으로 패키지를 설치할 수 있다.

\- conda 채널에 있는 패키지는 "conda install -c \[채널명] \[패키지명]" 와 같이 설치 할 수 있다.

\- 위 "2" 항목에서 생성한 conda environment 경로 아래에 패키지 들이 설치 된다.

\


&#x20;\- 예제 -

| <p>[optpar02@login02 ~]$ <strong>module load python/3.7.1</strong></p><p>[optpar02@login02 ~]$ <strong>source activate scikit-learn_0.21</strong></p><p>(scikit-learn_0.21) [optpar02@login02 ~]$ <strong>conda install scikit-learn</strong></p><p>Collecting package metadata: done</p><p>Solving environment: done</p><p><br></p><p>## Package Plan ##</p><p><br></p><p>  environment location: /home01/optpar02/.conda/envs/scikit-learn_0.21</p><p><br></p><p>  added / updated specs:</p><p>    - scikit-learn</p><p><br></p><p><br></p><p>The following packages will be downloaded:</p><p><br></p><p>    package                    |            build</p><p>    ---------------------------|-----------------</p><p>    ca-certificates-2019.1.23  |                0         126 KB</p><p>    certifi-2019.3.9           |           py37_0         155 KB</p><p>    intel-openmp-2019.3        |              199         886 KB</p><p>    libedit-3.1.20181209       |       hc058e9b_0         188 KB</p><p>    mkl-2019.3                 |              199       203.3 MB</p><p>    mkl_fft-1.0.10             |   py37ha843d7b_0         169 KB</p><p>    numpy-1.16.2               |   py37h7e9f1db_0          49 KB</p><p>    numpy-base-1.16.2          |   py37hde5b4d6_0         4.3 MB</p><p>    openssl-1.1.1b             |       h7b6447c_1         4.0 MB</p><p>    pip-19.0.3                 |           py37_0         1.8 MB</p><p>    python-3.7.3               |       h0371630_0        36.7 MB</p><p>    scikit-learn-0.20.3        |   py37hd81dba3_0         5.8 MB</p><p>    scipy-1.2.1                |   py37h7c811a0_0        17.7 MB</p><p>    setuptools-40.8.0          |           py37_0         643 KB</p><p>    sqlite-3.27.2              |       h7b6447c_0         1.9 MB</p><p>    wheel-0.33.1               |           py37_0          39 KB</p><p>    ------------------------------------------------------------</p><p>                                           Total:       277.6 MB</p><p><br></p><p>The following NEW packages will be INSTALLED:</p><p><br></p><p>  blas               pkgs/main/linux-64::blas-1.0-mkl</p><p>  ca-certificates    pkgs/main/linux-64::ca-certificates-2019.1.23-0</p><p>  certifi            pkgs/main/linux-64::certifi-2019.3.9-py37_0</p><p>  intel-openmp       pkgs/main/linux-64::intel-openmp-2019.3-199</p><p>  libedit            pkgs/main/linux-64::libedit-3.1.20181209-hc058e9b_0</p><p>  libffi             pkgs/main/linux-64::libffi-3.2.1-hd88cf55_4</p><p>  libgcc-ng          pkgs/main/linux-64::libgcc-ng-8.2.0-hdf63c60_1</p><p>  libgfortran-ng     pkgs/main/linux-64::libgfortran-ng-7.3.0-hdf63c60_0</p><p>  libstdcxx-ng       pkgs/main/linux-64::libstdcxx-ng-8.2.0-hdf63c60_1</p><p>  mkl                pkgs/main/linux-64::mkl-2019.3-199</p><p>  mkl_fft            pkgs/main/linux-64::mkl_fft-1.0.10-py37ha843d7b_0</p><p>  mkl_random         pkgs/main/linux-64::mkl_random-1.0.2-py37hd81dba3_0</p><p>  ncurses            pkgs/main/linux-64::ncurses-6.1-he6710b0_1</p><p>  numpy              pkgs/main/linux-64::numpy-1.16.2-py37h7e9f1db_0</p><p>  numpy-base         pkgs/main/linux-64::numpy-base-1.16.2-py37hde5b4d6_0</p><p>  openssl            pkgs/main/linux-64::openssl-1.1.1b-h7b6447c_1</p><p>  pip                pkgs/main/linux-64::pip-19.0.3-py37_0</p><p>  python             pkgs/main/linux-64::python-3.7.3-h0371630_0</p><p>  readline           pkgs/main/linux-64::readline-7.0-h7b6447c_5</p><p>  scikit-learn       pkgs/main/linux-64::scikit-learn-0.20.3-py37hd81dba3_0</p><p>  scipy              pkgs/main/linux-64::scipy-1.2.1-py37h7c811a0_0</p><p>  setuptools         pkgs/main/linux-64::setuptools-40.8.0-py37_0</p><p>  sqlite             pkgs/main/linux-64::sqlite-3.27.2-h7b6447c_0</p><p>  tk                 pkgs/main/linux-64::tk-8.6.8-hbc83047_0</p><p>  wheel              pkgs/main/linux-64::wheel-0.33.1-py37_0</p><p>  xz                 pkgs/main/linux-64::xz-5.2.4-h14c3975_4</p><p>  zlib               pkgs/main/linux-64::zlib-1.2.11-h7b6447c_3</p><p><br></p><p><br></p><p>Proceed ([y]/n)? y</p><p><br></p><p><br></p><p>Downloading and Extracting Packages</p><p>setuptools-40.8.0    | 643 KB    | ##################################### | 100% </p><p>mkl_fft-1.0.10       | 169 KB    | ##################################### | 100% </p><p>pip-19.0.3           | 1.8 MB    | ##################################### | 100% </p><p>mkl-2019.3           | 203.3 MB  | ##################################### | 100% </p><p>ca-certificates-2019 | 126 KB    | ##################################### | 100% </p><p>sqlite-3.27.2        | 1.9 MB    | ##################################### | 100% </p><p>wheel-0.33.1         | 39 KB     | ##################################### | 100% </p><p>python-3.7.3         | 36.7 MB   | ##################################### | 100% </p><p>intel-openmp-2019.3  | 886 KB    | ##################################### | 100% </p><p>libedit-3.1.20181209 | 188 KB    | ##################################### | 100% </p><p>numpy-base-1.16.2    | 4.3 MB    | ##################################### | 100% </p><p>scipy-1.2.1          | 17.7 MB   | ##################################### | 100% </p><p>scikit-learn-0.20.3  | 5.8 MB    | ##################################### | 100% </p><p>numpy-1.16.2         | 49 KB     | ##################################### | 100% </p><p>certifi-2019.3.9     | 155 KB    | ##################################### | 100% </p><p>openssl-1.1.1b       | 4.0 MB    | ##################################### | 100% </p><p>Preparing transaction: done</p><p>Verifying transaction: done</p><p>Executing transaction: done</p><p>(scikit-learn_0.21) [optpar02@login02 ~]$ <strong>python -c "import sklearn"</strong></p><p>(scikit-learn_0.21) [optpar02@login02 ~]$</p> |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\


**4. Conda Environment 목록 확인**

\- "conda-env list" 또는 "conda env list" 를 이용하여 목록을 확인 할 수 있다.

\


\[예제]

| <p>(scikit-learn_0.21) [optpar02@login02 ~]$ <strong>conda env list</strong></p><p># conda environments:</p><p>#</p><p>base                     /apps/applications/PYTHON/3.7</p><p><strong>scikit-learn_0.21     *  /home01/optpar02/.conda/envs/scikit-learn_0.21</strong></p><p><br></p><p>[optpar02@login02 ~]$</p> |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\


**5. Conda Environment 삭제**

\- "conda-env remove -n \[ENVIRONMENT]" 또는 "conda env remove -n \[ENVIRONMENT]" 를 이용하여 삭제 할 수 있다.

\


\[예제]

| <p>[optpar02@login02 ~]$ <strong>module load python/3.7.1</strong></p><p>[optpar02@login02 ~]$ <strong>conda env remove -n scikit-learn_0.21</strong></p><p><br></p><p>Remove all packages in environment /home01/optpar02/.conda/envs/scikit-learn_0.21:</p><p><br></p><p>[optpar02@login02 ~]$ <strong>conda env list</strong></p><p># conda environments:</p><p>#</p><p>base                  *  /apps/applications/PYTHON/3.7</p><p><br></p><p>[optpar02@login02 ~]$<br></p> |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\


**6. Conda Environment 내보내기**

\- 내보내기 전 conda-pack 패키지 필요

&#x20; (참고) [https://conda.github.io/conda-pack](https://conda.github.io/conda-pack)

\- "conda pack -n \[ENVIRONMENT] -o \[파일명]" 을 이용하여 conda environment 를 다른 시스템에서 활용할 수 있다.

&#x20; (예) 외부 인터넷이 연결되지 않는 경우, 다른 시스템에서 동일한 conda 환경을 이용하는 경우

\


\[예제]

| <p>[optpar02@login02 ~]$ <strong>module load python/3.7.1</strong></p><p>[optpar02@login02 ~]$ <strong>source activate tensorflow_1.12</strong></p><p>(tensorflow_1.12) [optpar02@login02 ~]$ <strong>conda install -c conda-forge -n tensorflow_1.12</strong></p><p>(tensorflow_1.12) [optpar02@login02 ~]$ <strong>conda pack -n tensorflow_1.12 -o conda_tensorflow_1.12.tar.gz</strong></p><p>Collecting packages...</p><p>Packing environment at '/home01/optpar02/.conda/envs/tensorflow_1.12' to 'conda_tensorflow_1.12.tar.gz'</p><p>[########################################] | 100% Completed |  4min 18.8s</p><p>(tensorflow_1.12) [optpar02@login02 ~]$ ls -l conda_tensorflow_1.12.tar.gz</p><p>-rw-------. 1 optpar02 in0162 1459826406 Mar 28 15:03 <strong>conda_tensorflow_1.12.tar.gz</strong></p><p>(tensorflow_1.12) [optpar02@login02 ~]$</p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\


**7. Conda Environment 가져오기**

\- conda pack 을 이용하여 생성했던 conda environment 를 아래 \[예제]와 같이 가져와 환경설정 후 사용 가능.

\


\[예제]

| <p>[optpar02@login02 ~]$ <strong>module load python/3.7.1</strong></p><p>[optpar02@login02 ~]$ <strong>conda env list</strong></p><p># conda environments:</p><p>#</p><p>base                  *  /apps/applications/PYTHON/3.7</p><p><br></p><p>[optpar02@login02 ~]$ <strong>mkdir -p $HOME/.conda/envs/tensorflow_1.12</strong></p><p>[optpar02@login02 ~]$ <strong>tar xvzf conda_tensorflow_1.12.tar.gz -C $HOME/.conda/envs/tensorflow_1.12</strong></p><p>[optpar02@login02 ~]$ <strong>cd $HOME/.conda/envs/tensorflow_1.12/bin</strong></p><p>[optpar02@login02 ~]$ <strong>./conda-unpack</strong></p><p>[optpar02@login02 ~]$ <strong>conda env list</strong></p><p># conda environments:</p><p>#</p><p>base                  *  /apps/applications/PYTHON/3.7</p><p>tensorflow_1.12          /home01/optpar02/.conda/envs/tensorflow_1.12</p><p><br></p><p>[optpar02@login02 ~]$ <strong>source activate tensorflow_1.12</strong></p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

\
