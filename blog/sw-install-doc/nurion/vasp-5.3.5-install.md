---
description: 슈퍼컴퓨팅인프라센터 2018. 12. 5. 18:24
---

# 누리온 VASP 5.3.5 설치

KISTI 슈퍼컴퓨팅센터의 누리온 시스템에 vasp 5.3.5 Source 버전으로 설치 하는 방법에 대하여 소개 한다.



**1. 설치 환경**

|  **구분**     | **내용**                      |
| ----------- | --------------------------- |
|  대상 시스템     |  누리온                        |
| OS Version  |  리눅스 / CentOS 7.3           |
|  CPU        |  Intel(R) Xeon(R) Gold 6148 |
|  컴파일러       |  Intel 2018.3 Version       |
|  MPI        |  IntelMPI 2018.3 Version    |
|  기타         |  Intel MKL Math Library     |



**2. 설치 전 환경 설정**

&#x20; 누리온 시스템은 PATH, LD\_LIBRARY\_PATH 등을 쉽게 하기 위하여 \
&#x20; 환경설정 툴인 Modules(http://modules.sourceforge.net)이 구성되어 있고,\
&#x20; 이하 설치 소개 에서는 module load를 이용한 환경 설정 방법을 이용한다.



\[ 환경 설정 ]

|  $ module load intel/18.0.3 impi/18.0.3 |
| --------------------------------------- |



**3. vasp 5.3.5 버전 설치 과정**

&#x20;설치 과정 소개는 tar 를 이용한 압축 해제 방법과 설정 방법등 진행 절차를 위주로 설명하고, 소스 파일 다운로드 등은 생략한다. &#x20;

|  **설치 과정**                                                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p> $ tar xvf vasp.5.lib.tar </p><p> $ tar xvf vasp.5.3.5.tar.gz </p><p> $ cd vasp.5.lib</p><p> $ cp makefile.linux_ifc_P4 makefile</p><p> $ vi makefile</p><p> - - - - - <strong>[vasp.5.lib makefile 파일 수정 내용]</strong> 참고</p><p> $ make</p><p> $ cd ../vasp.5.3</p><p> $ cp makefile.linux_ifc_P4 makefile</p><p> $ vi makefile</p><p> - - - - - <strong>[vasp.5.3 makefile 파일 수정 내용]</strong> 참고</p><p> $ make</p> |



**\[vasp.5.lib makefile 파일 수정 내용]**

| <p>.SUFFIXES: .inc .f .F</p><p></p><p># C-preprocessor</p><p>CPP     = gcc -E -P -C $*.F >$*.f</p><p>FC=ifort</p><p></p><p>CFLAGS = -O</p><p>FFLAGS = -O0 -FI</p><p>FREE   =  -FR</p><p></p><p>DOBJ =  preclib.o timing_.o derrf_.o dclock_.o  diolib.o dlexlib.o drdatab.o</p><p></p><p>#-----------------------------------------------------------------------</p><p># general rules</p><p>#-----------------------------------------------------------------------</p><p></p><p>libdmy.a: $(DOBJ) lapack_double.o linpack_double.o lapack_atlas.o</p><p>        -rm libdmy.a</p><p>        ar vq libdmy.a $(DOBJ)</p><p></p><p># files which do not require autodouble </p><p>lapack_min.o: lapack_min.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c lapack_min.f</p><p>lapack_double.o: lapack_double.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c lapack_double.f</p><p>lapack_single.o: lapack_single.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c lapack_single.f</p><p>lapack_atlas.o: lapack_atlas.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c lapack_atlas.f</p><p>linpack_double.o: linpack_double.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c linpack_double.f</p><p>linpack_single.o: linpack_single.f</p><p>        $(FC) $(FFLAGS) $(NOFREE) -c linpack_single.f</p><p></p><p>.c.o:</p><p>        $(CC) $(CFLAGS) -c $*.c</p><p>.F.o:</p><p>        $(CPP) </p><p>        $(FC) $(FFLAGS) $(FREE) $(INCS) -c $*.f</p><p>.F.f:</p><p>        $(CPP) </p><p>.f.o:</p><p>        $(FC) $(FFLAGS) $(FREE) $(INCS) -c $*.f</p> |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |



**\[vasp.5.3 makefile 파일 수정 내용]**

| <p>.SUFFIXES: .inc .f .f90 .F</p><p>SUFFIX=.f90</p><p></p><p>FC=mpiifort</p><p>FCL=$(FC)</p><p></p><p>CPP_=fpp -f_com=no -free -w0 $*.F $*$(SUFFIX)</p><p><br>FFLAGS =  -FR -assume byterecl</p><p></p><p>OFLAG=-O3 -ip -ftz -xCORE-AVX2</p><p>OFLAG_HIGH = $(OFLAG)</p><p>OBJ_HIGH =</p><p>OBJ_NOOPT =</p><p>DEBUG  = -FR -O0</p><p>INLINE = $(OFLAG)</p><p></p><p>MKL_PATH=$(MKLROOT)/lib/intel64</p><p></p><p>BLAS= -mkl=cluster</p><p></p><p>BLACS = </p><p>SCALAPACK = </p><p><br>CPP= $(CPP_) -DMPI -DHOST=\"LinuxIFC\" -DIFC \</p><p> -DCACHE_SIZE=16000 -DPGF90 -Davoidalloc -DNGZhalf \</p><p> -DMPI_BLOCK=8000 -Duse_collective \</p><p> -DRPROMU_DGEMV -DRACCMU_DGEMV</p><p></p><p>LIB  = -L../vasp.5.lib -ldmy \</p><p>     ../vasp.5.lib/linpack_double.o \</p><p>     $(BLAS) $(SCALAPACK)</p><p></p><p>LINK = -shared-intel</p><p></p><p>INCS= -I$(MKLROOT)/include/fftw</p><p>FFT3D= fftmpiw.o fftmpi_map.o fftw3d.o fft3dlib.o \</p><p>       $(MKLROOT)/lib/intel64/libfftw3xf_intel.a</p><p></p><p>BASIC=   symmetry.o symlib.o   lattlib.o  random.o</p><p></p><p>SOURCE=  base.o     mpi.o      smart_allocate.o      xml.o  \</p><p>         constant.o jacobi.o   main_mpi.o  scala.o   \</p><p>         asa.o      lattice.o  poscar.o   ini.o  mgrid.o  xclib.o  vdw_nl.o  xclib_grad.o \</p><p>         radial.o   pseudo.o   gridq.o     ebs.o  \</p><p>         mkpoints.o wave.o     wave_mpi.o  wave_high.o  spinsym.o \</p><p>         $(BASIC)   nonl.o     nonlr.o    nonl_high.o dfast.o    choleski2.o \</p><p>         mix.o      hamil.o    xcgrad.o   xcspin.o    potex1.o   potex2.o  \</p><p>         constrmag.o cl_shift.o relativistic.o LDApU.o \</p><p>         paw_base.o metagga.o  egrad.o    pawsym.o   pawfock.o  pawlhf.o   rhfatm.o  hyperfine.o paw.o   \</p><p>         mkpoints_full.o       charge.o   Lebedev-Laikov.o  stockholder.o dipol.o    pot.o \</p><p>         dos.o      elf.o      tet.o      tetweight.o hamil_rot.o \</p><p>         chain.o    dyna.o     k-proj.o    sphpro.o    us.o  core_rel.o \</p><p>         aedens.o   wavpre.o   wavpre_noio.o broyden.o \</p><p>         dynbr.o    hamil_high.o  rmm-diis.o reader.o   writer.o   tutor.o xml_writer.o \</p><p>         brent.o    stufak.o   fileio.o   opergrid.o stepver.o  \</p><p>         chgloc.o   fast_aug.o fock_multipole.o  fock.o  mkpoints_change.o sym_grad.o \</p><p>         mymath.o   internals.o npt_dynamics.o   dynconstr.o dimer_heyden.o dvvtrajectory.o subdftd3.o \</p><p>         vdwforcefield.o nmr.o      pead.o     subrot.o   subrot_scf.o  paircorrection.o \</p><p>         force.o    pwlhf.o    gw_model.o optreal.o  steep.o    davidson.o  david_inner.o \</p><p>         electron.o rot.o  electron_all.o shm.o    pardens.o  \</p><p>         optics.o   constr_cell_relax.o   stm.o    finite_diff.o elpol.o    \</p><p>         hamil_lr.o rmm-diis_lr.o  subrot_cluster.o subrot_lr.o \</p><p>         lr_helper.o hamil_lrf.o   elinear_response.o ilinear_response.o \</p><p>         linear_optics.o \</p><p>         setlocalpp.o  wannier.o electron_OEP.o electron_lhf.o twoelectron4o.o \</p><p>         gauss_quad.o m_unirnk.o minimax_tabs.o minimax.o \</p><p>         mlwf.o     ratpol.o screened_2e.o wave_cacher.o chi_base.o wpot.o \</p><p>         local_field.o ump2.o ump2kpar.o fcidump.o ump2no.o \</p><p>         bse_te.o bse.o acfdt.o chi.o sydmat.o \</p><p>         lcao_bare.o wnpr.o dmft.o \</p><p>         rmm-diis_mlr.o  linear_response_NMR.o wannier_interpol.o linear_response.o  auger.o getshmem.o \</p><p>         dmatrix.o</p><p></p><p>vasp: $(SOURCE) $(FFT3D) $(INC) main.o</p><p>        rm -f vasp</p><p>        $(FCL) -o vasp main.o  $(SOURCE)   $(FFT3D) $(LIB) $(LINK)</p><p>makeparam: $(SOURCE) $(FFT3D) makeparam.o main.F $(INC)</p><p>        $(FCL) -o makeparam  $(LINK) makeparam.o $(SOURCE) $(FFT3D) $(LIB)</p><p>zgemmtest: zgemmtest.o base.o random.o $(INC)</p><p>        $(FCL) -o zgemmtest $(LINK) zgemmtest.o random.o base.o $(LIB)</p><p>dgemmtest: dgemmtest.o base.o random.o $(INC)</p><p>        $(FCL) -o dgemmtest $(LINK) dgemmtest.o random.o base.o $(LIB) </p><p>ffttest: base.o smart_allocate.o mpi.o mgrid.o random.o ffttest.o $(FFT3D) $(INC)</p><p>        $(FCL) -o ffttest $(LINK) ffttest.o mpi.o mgrid.o random.o smart_allocate.o base.o $(FFT3D) $(LIB)</p><p>kpoints: $(SOURCE) $(FFT3D) makekpoints.o main.F $(INC)</p><p>        $(FCL) -o kpoints $(LINK) makekpoints.o $(SOURCE) $(FFT3D) $(LIB)</p><p></p><p>clean:  </p><p>        -rm -f *.g *.f90 *.o *.L *.mod ; touch *.F</p><p></p><p>main.o: main$(SUFFIX)</p><p>        $(FC) $(FFLAGS) $(DEBUG)  $(INCS) -c main$(SUFFIX)</p><p>xcgrad.o: xcgrad$(SUFFIX)</p><p>        $(FC) $(FFLAGS) $(INLINE)  $(INCS) -c xcgrad$(SUFFIX)</p><p>xcspin.o: xcspin$(SUFFIX)</p><p>        $(FC) $(FFLAGS) $(INLINE)  $(INCS) -c xcspin$(SUFFIX)</p><p></p><p>makeparam.o: makeparam$(SUFFIX)</p><p>        $(FC) $(FFLAGS) $(DEBUG)  $(INCS) -c makeparam$(SUFFIX)</p><p></p><p>makeparam$(SUFFIX): makeparam.F main.F</p><p></p><p>base.o: base.inc base.F</p><p>mgrid.o: mgrid.inc mgrid.F</p><p>constant.o: constant.inc constant.F</p><p>lattice.o: lattice.inc lattice.F</p><p>setex.o: setexm.inc setex.F</p><p>pseudo.o: pseudo.inc pseudo.F</p><p>mkpoints.o: mkpoints.inc mkpoints.F</p><p>wave.o: wave.F</p><p>nonl.o: nonl.inc nonl.F</p><p>nonlr.o: nonlr.inc nonlr.F</p><p><br>$(OBJ_HIGH):</p><p>        $(CPP)</p><p>        $(FC) $(FFLAGS) $(OFLAG_HIGH) $(INCS) -c $*$(SUFFIX)</p><p>$(OBJ_NOOPT):</p><p>        $(CPP)</p><p>        $(FC) $(FFLAGS) $(INCS) -c $*$(SUFFIX)</p><p><br>fft3dlib_f77.o: fft3dlib_f77.F</p><p>        $(CPP)</p><p>        $(F77) $(FFLAGS_F77) -c $*$(SUFFIX)</p><p><br>.F.o:</p><p>        $(CPP)</p><p>        $(FC) $(FFLAGS) $(OFLAG) $(INCS) -c $*$(SUFFIX)</p><p>.F$(SUFFIX):</p><p>        $(CPP)</p><p>$(SUFFIX).o:</p><p>        $(FC) $(FFLAGS) $(OFLAG) $(INCS) -c $*$(SUFFIX)</p><p><br># special rules</p><p>#-----------------------------------------------------------------------</p><p># these special rules have been tested for ifc.11 and ifc.12 only</p><p><br>fft3dlib.o : fft3dlib.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O2 -c $*$(SUFFIX)</p><p>fft3dfurth.o : fft3dfurth.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 -c $*$(SUFFIX)</p><p>fftw3d.o : fftw3d.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 $(INCS) -c $*$(SUFFIX)</p><p>fftmpi.o : fftmpi.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 -c $*$(SUFFIX)</p><p>fftmpiw.o : fftmpiw.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 $(INCS) -c $*$(SUFFIX)</p><p>wave_high.o : wave_high.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 -c $*$(SUFFIX)</p><p># the following rules are probably no longer required (-O3 seems to work)</p><p>wave.o : wave.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O2 -c $*$(SUFFIX)</p><p>paw.o : paw.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 -c $*$(SUFFIX)</p><p>cl_shift.o : cl_shift.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O2 -c $*$(SUFFIX)</p><p>us.o : us.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O1 -c $*$(SUFFIX)</p><p>LDApU.o : LDApU.F</p><p>        $(CPP)</p><p>        $(FC) -FR -lowercase -O2 -c $*$(SUFFIX)</p> |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
